# -*- coding: utf-8; -*-
# Emacs Makefile for TRAMP
# @configure_input@

# Copyright (C) 2013 Free Software Foundation, Inc.

# Author: Michael Albinus <michael.albinus@gmx.de>
# Keywords: comm, processes

EMACS		= @EMACS@
CLEAN_FILES	= @TRAMP_CLEAN_FILES@

EM = $(EMACS) --no-site-file --no-site-lisp -batch

.PHONY: all check clean distclean

.SUFFIXES: .elc .el

all: check

check: tramp-tests.elc
	$(EM) -L `pwd` -l tramp-tests -f ert-run-tests-batch-and-exit

%.elc: %.el
	$(EM) -l bytecomp -L `pwd` -f batch-byte-compile $?

clean:
	$(RM) $(CLEAN_FILES)

distclean: clean
